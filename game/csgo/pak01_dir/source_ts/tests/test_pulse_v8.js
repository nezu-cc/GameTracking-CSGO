import { Instance } from "domains/testdomain";
// ----------------------
function TEST_EQ(sTestName, actual, expected) {
    if (actual === expected) {
        Instance.Log(`Test Passed: ${sTestName}`);
    }
    else {
        Instance.Log(`Test FAILED: ${sTestName}`);
        Instance.Log(`\texpected "${actual}" to equal ${expected}`);
    }
}
// ----------------------
TEST_EQ("Domain.keys.isArray", Array.isArray(Object.keys(Instance)), true);
// ----------------------
TEST_EQ("Domain.GetFloatValue() == 0.0", Instance.GetFloatValue(), 0.0);
// poke the C++ parameter default into the global
Instance.SetFloatValueOptional();
TEST_EQ("Domain.GetFloatValue() == 1.0", Instance.GetFloatValue(), 1.0);
// verify we can override it
Instance.SetFloatValueOptional(2.0);
TEST_EQ("Domain.GetFloatValue() == 2.0", Instance.GetFloatValue(), 2.0);
// Reset for the next pass, because this is static
Instance.SetFloatValueOptional(0.0);
// ----------------------
TEST_EQ("Domain.GetStringWithDefault( 'foo' ) == 'foo'", Instance.GetStringWithDefault('foo'), 'foo');
TEST_EQ("Domain.GetStringWithDefault() == 'Default echo string.'", Instance.GetStringWithDefault(), 'Default echo string.');
// ----------------------
{
    var ent_a = Instance.LibrarySpawnFakeEntity("foo");
    var ent_b = Instance.LibrarySpawnFakeEntity("bar");
    if (ent_a && ent_b) {
        ent_a.SetIntValue(5);
        ent_b.SetIntValue(6);
        TEST_EQ("ent_a.GetIntValue() == 5", ent_a.GetIntValue(), 5);
        TEST_EQ("ent_b.GetIntValue() == 6", ent_b.GetIntValue(), 6);
    }
    else {
        Instance.Log("FAILED to create entities");
    }
    if (ent_a)
        Instance.LibraryDestroyFakeEntity(ent_a);
    if (ent_b)
        Instance.LibraryDestroyFakeEntity(ent_b);
}
// ----------------------
let bGenerateIntCalled = false;
let nGeneratedInt;
Instance.GenerateInt(input => {
    bGenerateIntCalled = true;
    nGeneratedInt = input * 2;
    return nGeneratedInt;
});
Instance.PublicMethod("TestPublicMethod", (val) => {
    TEST_EQ("GenerateInt called before TestPublicMethod", bGenerateIntCalled, true);
    TEST_EQ("TestPublicMethod called with GenerateInt output", nGeneratedInt, val);
});
// ----------------------
const x = Instance.GetFloatValue;
let bDidThrow = false;
try {
    x();
}
catch (e) {
    bDidThrow = true;
}
TEST_EQ("bDidThrow", bDidThrow, true);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdF9wdWxzZV92OC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NvbnRlbnQvY3Nnby9zb3VyY2VfdHMvdGVzdHMvdGVzdF9wdWxzZV92OC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFOUMseUJBQXlCO0FBRXpCLFNBQVMsT0FBTyxDQUFNLFNBQWlCLEVBQUUsTUFBUyxFQUFFLFFBQVc7SUFFM0QsSUFBSyxNQUFNLEtBQUssUUFBUSxFQUN4QjtRQUNJLFFBQVEsQ0FBQyxHQUFHLENBQUUsZ0JBQWdCLFNBQVMsRUFBRSxDQUFFLENBQUM7S0FDL0M7U0FFRDtRQUNJLFFBQVEsQ0FBQyxHQUFHLENBQUUsZ0JBQWdCLFNBQVMsRUFBRSxDQUFFLENBQUM7UUFDNUMsUUFBUSxDQUFDLEdBQUcsQ0FBRSxlQUFlLE1BQU0sY0FBYyxRQUFRLEVBQUUsQ0FBRSxDQUFDO0tBQ2pFO0FBQ0wsQ0FBQztBQUVELHlCQUF5QjtBQUV6QixPQUFPLENBQUUscUJBQXFCLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBRSxNQUFNLENBQUMsSUFBSSxDQUFFLFFBQVEsQ0FBRSxDQUFFLEVBQUUsSUFBSSxDQUFFLENBQUM7QUFFakYseUJBQXlCO0FBRXpCLE9BQU8sQ0FBRSwrQkFBK0IsRUFBRSxRQUFRLENBQUMsYUFBYSxFQUFFLEVBQUUsR0FBRyxDQUFFLENBQUM7QUFDMUUsaURBQWlEO0FBQ2pELFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0FBQ2pDLE9BQU8sQ0FBRSwrQkFBK0IsRUFBRSxRQUFRLENBQUMsYUFBYSxFQUFFLEVBQUUsR0FBRyxDQUFFLENBQUM7QUFDMUUsNEJBQTRCO0FBQzVCLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBRSxHQUFHLENBQUUsQ0FBQztBQUN0QyxPQUFPLENBQUUsK0JBQStCLEVBQUUsUUFBUSxDQUFDLGFBQWEsRUFBRSxFQUFFLEdBQUcsQ0FBRSxDQUFDO0FBQzFFLGtEQUFrRDtBQUNsRCxRQUFRLENBQUMscUJBQXFCLENBQUUsR0FBRyxDQUFFLENBQUM7QUFFdEMseUJBQXlCO0FBRXpCLE9BQU8sQ0FBRSwrQ0FBK0MsRUFBRSxRQUFRLENBQUMsb0JBQW9CLENBQUUsS0FBSyxDQUFFLEVBQUUsS0FBSyxDQUFFLENBQUM7QUFDMUcsT0FBTyxDQUFFLHlEQUF5RCxFQUFFLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxFQUFFLHNCQUFzQixDQUFFLENBQUM7QUFFOUgseUJBQXlCO0FBRXpCO0lBQ0ksSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLHNCQUFzQixDQUFFLEtBQUssQ0FBRSxDQUFDO0lBQ3JELElBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBRSxLQUFLLENBQUUsQ0FBQztJQUVyRCxJQUFLLEtBQUssSUFBSSxLQUFLLEVBQ25CO1FBQ0ksS0FBSyxDQUFDLFdBQVcsQ0FBRSxDQUFDLENBQUUsQ0FBQztRQUN2QixLQUFLLENBQUMsV0FBVyxDQUFFLENBQUMsQ0FBRSxDQUFDO1FBQ3ZCLE9BQU8sQ0FBRSwwQkFBMEIsRUFBRSxLQUFLLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFFLENBQUM7UUFDOUQsT0FBTyxDQUFFLDBCQUEwQixFQUFFLEtBQUssQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLENBQUUsQ0FBQztLQUNqRTtTQUVEO1FBQ0ksUUFBUSxDQUFDLEdBQUcsQ0FBRSwyQkFBMkIsQ0FBRSxDQUFDO0tBQy9DO0lBRUQsSUFBSyxLQUFLO1FBQ04sUUFBUSxDQUFDLHdCQUF3QixDQUFFLEtBQUssQ0FBRSxDQUFDO0lBQy9DLElBQUssS0FBSztRQUNOLFFBQVEsQ0FBQyx3QkFBd0IsQ0FBRSxLQUFLLENBQUUsQ0FBQztDQUNsRDtBQUVELHlCQUF5QjtBQUV6QixJQUFJLGtCQUFrQixHQUFHLEtBQUssQ0FBQztBQUMvQixJQUFJLGFBQXFCLENBQUM7QUFDMUIsUUFBUSxDQUFDLFdBQVcsQ0FBRSxLQUFLLENBQUMsRUFBRTtJQUUxQixrQkFBa0IsR0FBRyxJQUFJLENBQUM7SUFDMUIsYUFBYSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDMUIsT0FBTyxhQUFhLENBQUM7QUFDekIsQ0FBQyxDQUFFLENBQUM7QUFFSixRQUFRLENBQUMsWUFBWSxDQUFFLGtCQUFrQixFQUFFLENBQUUsR0FBVyxFQUFHLEVBQUU7SUFFekQsT0FBTyxDQUFFLDRDQUE0QyxFQUFFLGtCQUFrQixFQUFFLElBQUksQ0FBRSxDQUFDO0lBQ2xGLE9BQU8sQ0FBRSxpREFBaUQsRUFBRSxhQUFhLEVBQUUsR0FBRyxDQUFFLENBQUM7QUFDckYsQ0FBQyxDQUFFLENBQUM7QUFFSix5QkFBeUI7QUFFekIsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQztBQUNqQyxJQUFJLFNBQVMsR0FBRyxLQUFLLENBQUM7QUFDdEIsSUFDQTtJQUNJLENBQUMsRUFBRSxDQUFDO0NBQ1A7QUFDRCxPQUFRLENBQUMsRUFDVDtJQUNJLFNBQVMsR0FBRyxJQUFJLENBQUM7Q0FDcEI7QUFDRCxPQUFPLENBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUUsQ0FBQyJ9